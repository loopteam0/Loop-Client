<div *ngIf="errorState" class="errorHandler">
  <h1>
    An error occured
  </h1>
  <button mat-raised-button color="accent" (click)="getmoviedetails()">RETRY</button>
</div>

<!-- show spinner here -->
<app-spinner *ngIf="loading"></app-spinner>

<div class="details-container animated fadeInLeft" *ngIf="movieDetails">
  <div class="title">
    <h3 class="">{{movieDetails.title_long}}</h3>
    <p>Posted on {{movieDetails.date_uploaded }}</p>
  </div>


  <div class="details-image">
  <mat-card>
       <img class="card-img-top" src="{{movieDetails.large_cover_image}}" alt="image not found">
  </mat-card>
  </div>

  <div class="storyline">
    <mat-card>
      <p class="body">
        <strong>Storyline:</strong> {{movieDetails.description_intro}} </p>
    </mat-card>
  </div>

  <div class="props ">
    <mat-card>
      <mat-card-content>

        <h4>Media info</h4>
        <div class="general">

          <div class="cat-1">
            <p>
              <strong>title: </strong>
              <span>{{movieDetails.title_english}} </span>
            </p>
            <p>
              <strong>year: </strong>
              <span>{{movieDetails.year}} </span>
            </p>
            <p>
              <strong>Language: </strong>
              <span>{{movieDetails.language}} </span>
            </p>
            <p>
              <strong>subtitles: </strong>
              <span>
                <a (click)="opensubtitle(movieDetails.imdb_code)">Here</a>
              </span>
            </p>
            <p>
              <strong>trailer: </strong>
              <span>
                <a  (click)="openTrailer(movieDetails.yt_trailer_code)"> Watch </a>
              </span>
            </p>
            <p>
              <strong>genres: </strong>
              <span>{{movieDetails.genres}} </span>
            </p>
          </div>


          <div class="cat-2">
            <p>
              <strong>imdb_id: </strong>
              <span>{{movieDetails.imdb_code}} </span>
            </p>
            <p>
              <strong>released: </strong>
              <span>{{movieDetails.date_uploaded}} </span>
            </p>
            <p>
              <strong>runtime: </strong>
              <span>{{movieDetails.runtime | duration }} </span>
            </p>
            <p>
              <strong>rating: </strong>
              <span>{{movieDetails.rating}}/10 </span>
            </p>
            <p>
              <strong>MPAA rating: </strong>
              <span>{{movieDetails.mpa_rating ? movieDetails.mpa_rating : 'N/A'}} </span>
            </p>
            <p>
              <strong>downloaded: </strong>
              <span>{{movieDetails.download_count}} </span>
            </p>

          </div>
        </div>

        <!--  <div class="trailer">
            <h4>Trailer</h4>
            <iframe width="560" height="315" src="https://www.youtube.com/embed/{{movieDetails.yt_trailer_code  }} | sanitizer:'resourceUrl'"
             frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>
 -->
        <div *ngIf="movieDetails.medium_screenshot_image1">
          <h4>Screenshots</h4>
          <mat-card class="screenshots-card">
            <div class="screenshots">
            <img src="{{movieDetails.medium_screenshot_image1}}" alt="">
            <img src="{{movieDetails.medium_screenshot_image2}}" alt="">
            <!-- <img src="{{movieDetails.medium_screenshot_image3}}" alt=""> -->
          </div>
          </mat-card>
        </div>

        <div class="tabs">
          <h4>Download</h4>
          <mat-tab-group mat-stretch-tabs>
            <div *ngFor="let item of movieDetails.torrents">
              <mat-tab label="{{item.quality}}">
                <div class="tab-content ">
                  <div class="cat ">
                    <div class="cat-1 ">
                      <p>
                        <strong>provider: </strong>
                        <span>YTS</span>
                      </p>
                      <p>
                        <strong>filesize: </strong>
                        <span>{{item.size}}</span>
                      </p>
                      <p>
                        <strong>quality: </strong>
                        <span>{{item.quality}} </span>
                      </p>
                    </div>

                    <div class="cat-2 ">
                      <p>
                        <strong>date uploaded: </strong>
                        <span>{{item.date_uploaded}} </span>
                      </p>
                      <p>
                        <strong>seeds: </strong>
                        <span>{{item.seeds}}</span>
                      </p>
                      <p>
                        <strong>peers: </strong>
                        <span>{{item.peers}}</span>
                      </p>
                    </div>
                  </div>

                  <!--Download options-->
                  <div class="download">
                    <div class="button">
                      <a class="animated fadeInUp" mat-fab href="{{item.url}}" (click)="openSnackBar(movieDetails.title_long , item.quality )"
                      color="primary">
                        <mat-icon>file_download</mat-icon>
                      </a>
                    </div>
                  </div>

                  <!-- <mat-accordion>
                        <mat-expansion-panel>
                          <mat-expansion-panel-header>
                            Click here to magnet link
                          </mat-expansion-panel-header>
                          <p class="magnet">
                          magnet link
                          </p>
                        </mat-expansion-panel>
                    </mat-accordion> -->

                </div>
              </mat-tab>
            </div>


          </mat-tab-group>

        </div>
      </mat-card-content>
    </mat-card>


  </div>


</div>
<app-quote></app-quote>
<!-- magnet:?xt=urn:btih:{{item.hash}}&dn=Rampage+%28
magnet:?xt=urn:btih:{{item.hash}}&dn=Pacific+Rim%3A+Uprising+%28
magnet:?xt=urn:btih:{{item.hash}}&dn=Pacific+Rim%3A+Uprising+%28
magnet:?xt=urn:btih:{{item.hash}}&dn=Rampage+%28 -->
